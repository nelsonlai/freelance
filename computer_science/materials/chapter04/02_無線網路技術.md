# 無線網路技術

## 學習目標
- 理解無線網路的兩種模式（Ad Hoc 和 Infrastructure）
- 掌握 Wi-Fi 安全協定（WEP、WPA、WPA2）的差異
- 理解 SSID 的作用
- 了解隱藏節點問題及其解決方案

## 1. 無線網路的基本概念

### 1.1 什麼是無線網路？

**無線網路 (Wireless Network)** 是指不使用實體線路連接的網路，透過無線電波傳輸資料。

### 1.2 無線網路的優點

- **移動性**: 不受線路限制，可以移動使用
- **安裝方便**: 不需要佈線
- **擴展性**: 容易增加新的裝置

### 1.3 無線網路的缺點

- **安全性**: 訊號可能被竊聽
- **穩定性**: 可能受到干擾
- **速度**: 通常比有線網路慢
- **距離限制**: 訊號範圍有限

## 2. 無線網路模式

### 2.1 Ad Hoc 模式（點對點模式）

#### 定義

**Ad Hoc** 是一個由多個無線裝置**直接相互連接**組成的去中心化網路，不需要透過中央存取點 (Access Point, AP)。

#### 特點

- **去中心化**: 沒有中央控制節點
- **臨時性**: 通常用於臨時性的資料交換
- **小範圍**: 適合小範圍的裝置連接
- **對等連接**: 所有裝置地位平等

#### 應用場景

- 臨時檔案分享
- 遊戲連線
- 緊急情況下的通訊
- 沒有網路基礎設施的環境

#### 架構圖

```
裝置 A ←→ 裝置 B
  ↕         ↕
裝置 C ←→ 裝置 D
```

所有裝置直接相互連接，形成網狀網路。

### 2.2 Infrastructure 模式（基礎架構模式）

#### 定義

**Infrastructure** 模式中，所有無線裝置都透過一個**中央的存取點 (Access Point, AP)** 連接。AP 負責管理網路通訊，並可將無線網路橋接至有線網路（如網際網路）。

#### 特點

- **中央控制**: AP 管理所有通訊
- **穩定**: 有固定的中央節點
- **可擴展**: 容易擴展到有線網路
- **最常見**: 這是 Wi-Fi 最常見的使用模式

#### 應用場景

- 家庭 Wi-Fi 網路
- 辦公室無線網路
- 公共場所的 Wi-Fi 熱點
- 任何需要連接網際網路的場景

#### 架構圖

```
        存取點 (AP)
        /  |  \
       /   |   \
    裝置A 裝置B 裝置C
       |
    有線網路
       |
    網際網路
```

所有裝置透過 AP 連接，AP 連接到有線網路。

### 2.3 兩種模式的比較

| 特性 | Ad Hoc | Infrastructure |
|:---|:---|:---|
| **中央節點** | 無 | 有（AP） |
| **連接方式** | 裝置直接連接 | 透過 AP 連接 |
| **網路管理** | 分散式 | 集中式（AP 管理） |
| **連接網際網路** | 困難 | 容易（透過 AP） |
| **穩定性** | 較低 | 較高 |
| **適用場景** | 臨時、小範圍 | 長期、大範圍 |
| **常見程度** | 較少 | 非常常見 |

## 3. Wi-Fi 安全協定

### 3.1 為什麼需要安全協定？

無線網路的訊號在空氣中傳播，任何人都可以接收，因此需要加密來保護資料。

### 3.2 WEP (Wired Equivalent Privacy)

#### 定義

**WEP** 是最早的 Wi-Fi 安全協定，設計目標是提供與有線網路相當的隱私保護。

#### 技術細節

- **加密演算法**: RC4 串流加密
- **金鑰長度**: 64 位元或 128 位元
- **金鑰類型**: 靜態金鑰（手動設定，很少更換）

#### 問題

1. **設計缺陷**: 存在嚴重的安全漏洞
2. **容易被破解**: 可以在幾分鐘內被破解
3. **靜態金鑰**: 金鑰很少更換，一旦洩露就持續不安全

#### 現狀

- **已過時**: 現已極不安全，不應使用
- **不建議**: 所有現代裝置都不建議使用 WEP

### 3.3 WPA (Wi-Fi Protected Access)

#### 定義

**WPA** 是為取代 WEP 而設計的過渡方案。

#### 技術細節

- **加密演算法**: 仍使用 RC4，但改進金鑰管理
- **金鑰管理**: **TKIP (Temporal Key Integrity Protocol)**
  - 動態金鑰機制
  - 定期更換金鑰
  - 每個封包使用不同的金鑰

#### 改進

- **動態金鑰**: 解決了 WEP 靜態金鑰的問題
- **完整性檢查**: 防止資料被篡改
- **安全性提升**: 雖然仍使用 RC4，但安全性遠高於 WEP

#### 現狀

- **過渡方案**: 主要用於舊裝置
- **仍可用**: 比 WEP 安全，但不如 WPA2

### 3.4 WPA2 (Wi-Fi Protected Access II)

#### 定義

**WPA2** 是目前最廣泛使用的 Wi-Fi 安全標準。

#### 技術細節

- **加密演算法**: **AES (Advanced Encryption Standard)**
  - 比 RC4 更強大的加密演算法
  - 被美國政府採用為標準
- **協定**: **CCMP (Counter Mode with Cipher Block Chaining Message Authentication Code Protocol)**
  - 提供加密和完整性保護

#### 優點

- **高安全性**: 提供非常高的安全性
- **廣泛支援**: 所有現代裝置都支援
- **標準化**: 是 IEEE 802.11i 標準的一部分

#### 現狀

- **目前標準**: 是目前最推薦使用的安全協定
- **持續更新**: 有 WPA3 正在推廣，但 WPA2 仍是最常見的

### 3.5 三種協定的比較

| 特性 | WEP | WPA | WPA2 |
|:---|:---|:---|:---|
| **加密演算法** | RC4 | RC4 + TKIP | AES + CCMP |
| **金鑰管理** | 靜態 | 動態 (TKIP) | 動態 (AES) |
| **安全性** | 極低（已破解） | 中等 | 高 |
| **建議使用** | ❌ 不建議 | ⚠️ 僅舊裝置 | ✅ 強烈建議 |
| **推出時間** | 1999 | 2003 | 2004 |

## 4. SSID (Service Set Identifier)

### 4.1 定義

**SSID** 是無線網路的名稱，是一個長度最多 32 字元的字串，用於識別一個特定的無線區域網路 (WLAN)。

### 4.2 功能

- **網路識別**: 讓使用者可以識別和選擇要連接的網路
- **區分網路**: 在同一個區域可能有多個無線網路，SSID 用於區分

### 4.3 運作方式

- **廣播**: 無線基地台 (AP) 會定期廣播其 SSID
- **掃描**: 無線裝置掃描環境中的 SSID
- **選擇**: 使用者從掃描到的 SSID 列表中選擇要連接的網路

### 4.4 隱藏 SSID

- **功能**: 可以設定不廣播 SSID（隱藏網路）
- **效果**: 網路不會出現在掃描列表中
- **安全性**: 提供有限的安全性（安全性透過 obscurity）
- **注意**: 隱藏 SSID 不能提供真正的安全保護

## 5. 隱藏節點問題 (Hidden Node Problem)

### 5.1 問題描述

在一個無線網路中，當節點 A 和節點 C 都在 AP 的通訊範圍內，但 A 和 C 卻**互相聽不到對方的信號**時，會發生隱藏節點問題。

**情境**:
```
    節點 A          AP          節點 C
     ●─────────────●─────────────●
     可以聽到 AP    |    可以聽到 AP
     但聽不到 C    |    但聽不到 A
```

### 5.2 問題後果

如果節點 A 和節點 C 同時向 AP 傳送資料：
- 兩個訊號會在 AP 端發生**碰撞 (Collision)**
- 導致傳輸失敗
- 兩個節點都需要重傳，降低網路效率

### 5.3 為什麼會發生？

- **距離太遠**: A 和 C 之間的距離超過了無線訊號的傳輸範圍
- **障礙物**: 中間有障礙物阻擋訊號
- **訊號強度**: 訊號強度不足以到達對方

### 5.4 解決方案：RTS/CTS 機制

#### RTS/CTS 是什麼？

- **RTS (Request to Send)**: 請求發送
- **CTS (Clear to Send)**: 清除發送（允許發送）

#### 運作機制

1. **節點發送 RTS**: 當一個節點要傳送資料前，先向 AP 發送一個短的 RTS 請求
2. **AP 廣播 CTS**: AP 收到 RTS 後，會廣播一個 CTS 封包給所有在範圍內的節點
3. **其他節點延後**: 即使是隱藏節點（如 C），收到 CTS 後也會知道媒體正忙，從而延後自己的傳送
4. **避免碰撞**: 這樣可以避免碰撞

#### 流程圖

```
節點 A 要傳送資料:
  A → AP: RTS (Request to Send)
  
AP 廣播 CTS:
  AP → 所有節點: CTS (Clear to Send)
  
節點 C 收到 CTS:
  C 知道媒體正忙，延後傳送
  
節點 A 傳送資料:
  A → AP: 資料封包（不會與 C 碰撞）
```

#### 優點

- **解決隱藏節點問題**: 有效避免隱藏節點造成的碰撞
- **提高效率**: 減少重傳，提高網路效率

#### 缺點

- **額外開銷**: RTS/CTS 封包本身需要時間和頻寬
- **延遲增加**: 增加了傳輸的延遲

## 6. 實際應用

### 6.1 選擇網路模式

- **家庭/辦公室**: 使用 Infrastructure 模式
- **臨時檔案分享**: 可以使用 Ad Hoc 模式

### 6.2 選擇安全協定

- **新裝置**: 使用 WPA2
- **舊裝置**: 如果必須，使用 WPA（但應考慮升級）

### 6.3 處理隱藏節點問題

- **啟用 RTS/CTS**: 在 AP 設定中啟用 RTS/CTS 機制
- **調整位置**: 調整節點位置，減少隱藏節點

## 7. 練習題

### 練習題 1

請比較 Ad Hoc 和 Infrastructure 兩種無線網路模式。

**參考答案：**
- **Ad Hoc**: 去中心化，裝置直接連接，適合臨時、小範圍使用
- **Infrastructure**: 有中央 AP，所有裝置透過 AP 連接，適合長期、大範圍使用，可以連接網際網路

### 練習題 2

請說明 WEP、WPA、WPA2 三種安全協定的差異。

**參考答案：**
- **WEP**: 使用 RC4 和靜態金鑰，已不安全，不應使用
- **WPA**: 使用 RC4 + TKIP，動態金鑰，安全性中等，僅用於舊裝置
- **WPA2**: 使用 AES + CCMP，動態金鑰，安全性高，是目前標準

### 練習題 3

什麼是隱藏節點問題？如何解決？

**參考答案：**
隱藏節點問題是指兩個節點都在 AP 範圍內，但互相聽不到對方信號，如果同時傳送會造成碰撞。解決方案是使用 RTS/CTS 機制：節點傳送前先發送 RTS，AP 廣播 CTS，其他節點收到 CTS 後知道媒體正忙，會延後傳送，從而避免碰撞。

## 8. 考試重點提醒

1. **兩種模式**: 清楚區分 Ad Hoc 和 Infrastructure 模式
2. **安全協定**: 理解 WEP、WPA、WPA2 的差異和演進
3. **SSID**: 理解 SSID 的作用
4. **隱藏節點問題**: 理解問題原因和 RTS/CTS 解決方案
5. **實際應用**: 了解如何選擇適當的模式和安全協定
