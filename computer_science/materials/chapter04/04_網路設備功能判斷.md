# 網路設備功能判斷

## 學習目標
- 理解常見網路設備的功能
- 掌握路由器、交換器、集線器等設備的差異
- 了解各設備在 OSI 模型中的層級
- 能夠判斷不同場景下應該使用哪種設備

## 1. OSI 模型回顧

### 1.1 OSI 七層模型

| 層級 | 名稱 | 功能 |
|:---:|:---|:---|
| 7 | 應用層 | 應用程式介面 |
| 6 | 表現層 | 資料格式轉換 |
| 5 | 會議層 | 建立和管理連線 |
| 4 | 傳輸層 | 端對端通訊 |
| 3 | 網路層 | 路由和定址 |
| 2 | 資料連結層 | 框架傳輸、錯誤偵測 |
| 1 | 實體層 | 實體傳輸 |

### 1.2 TCP/IP 模型

| 層級 | 名稱 | 對應 OSI |
|:---:|:---|:---|
| 4 | 應用層 | 5-7 |
| 3 | 傳輸層 | 4 |
| 2 | 網路層 | 3 |
| 1 | 資料連結層 | 2 |
| 0 | 實體層 | 1 |

## 2. 常見網路設備

### 2.1 集線器 (Hub)

#### 定義

**集線器**是工作在**實體層 (Layer 1)** 的設備，用於連接多個網路裝置。

#### 功能

- **訊號放大**: 接收訊號並放大後轉發
- **廣播**: 將收到的資料廣播到所有連接的埠
- **不處理資料**: 不檢查資料內容，只是轉發訊號

#### 運作方式

```
裝置 A 發送資料 → Hub → 廣播到所有埠 → 裝置 B, C, D 都收到
```

#### 特點

- **半雙工**: 同一時間只能單向傳輸
- **衝突域**: 所有連接的裝置在同一個衝突域
- **廣播域**: 所有連接的裝置在同一個廣播域
- **無智慧**: 不進行任何決策

#### 優點

- 簡單便宜
- 容易安裝

#### 缺點

- 效率低（廣播所有資料）
- 安全性差（所有裝置都能收到資料）
- 容易產生衝突
- 已逐漸被交換器取代

### 2.2 交換器 (Switch)

#### 定義

**交換器**是工作在**資料連結層 (Layer 2)** 的設備，根據 MAC 位址轉發資料。

#### 功能

- **MAC 位址學習**: 學習每個埠連接的裝置 MAC 位址
- **選擇性轉發**: 只將資料轉發到目標裝置所在的埠
- **衝突域隔離**: 每個埠是獨立的衝突域

#### 運作方式

```
1. 學習階段: 記錄每個埠對應的 MAC 位址
2. 轉發階段: 根據目標 MAC 位址選擇性轉發
3. 廣播未知: 如果不知道目標 MAC，則廣播
```

#### 特點

- **全雙工**: 可以同時雙向傳輸
- **衝突域隔離**: 每個埠是獨立的衝突域
- **廣播域**: 所有埠仍在同一個廣播域
- **有智慧**: 根據 MAC 位址表進行決策

#### 類型

**1. 非管理型交換器 (Unmanaged Switch)**
- 即插即用
- 無需配置
- 適合小型網路

**2. 管理型交換器 (Managed Switch)**
- 可以配置和管理
- 支援 VLAN、QoS 等功能
- 適合大型網路

#### 優點

- 效率高（選擇性轉發）
- 安全性較好
- 減少衝突
- 提高網路效能

#### 缺點

- 比集線器貴
- 配置可能較複雜（管理型）

### 2.3 路由器 (Router)

#### 定義

**路由器**是工作在**網路層 (Layer 3)** 的設備，根據 IP 位址進行路由決策。

#### 功能

- **路由選擇**: 決定資料包的最佳路徑
- **IP 位址處理**: 根據 IP 位址轉發資料
- **網路隔離**: 連接不同的網路
- **廣播域隔離**: 每個介面是獨立的廣播域

#### 運作方式

```
1. 接收資料包
2. 檢查目標 IP 位址
3. 查詢路由表
4. 決定轉發路徑
5. 轉發到下一跳路由器或目標網路
```

#### 特點

- **網路層設備**: 工作在 Layer 3
- **廣播域隔離**: 每個介面是獨立的廣播域
- **路由決策**: 根據路由表進行決策
- **網路連接**: 連接不同的網路

#### 優點

- 連接不同網路
- 提供最佳路徑選擇
- 網路隔離和安全性
- 支援複雜的路由協定

#### 缺點

- 成本較高
- 配置複雜
- 處理速度可能較慢（需要檢查 IP 位址）

### 2.4 橋接器 (Bridge)

#### 定義

**橋接器**是工作在**資料連結層 (Layer 2)** 的設備，用於連接兩個網路區段。

#### 功能

- **框架過濾**: 根據 MAC 位址過濾框架
- **衝突域隔離**: 連接的區段是獨立的衝突域
- **學習功能**: 學習 MAC 位址

#### 特點

- 類似交換器，但通常只有兩個埠
- 已逐漸被交換器取代

### 2.5 閘道器 (Gateway)

#### 定義

**閘道器**是工作在**應用層 (Layer 7)** 的設備，用於連接不同協定的網路。

#### 功能

- **協定轉換**: 在不同協定之間轉換
- **高層處理**: 處理應用層的資料

#### 應用

- 連接不同類型的網路（如 TCP/IP 和 SNA）
- 電子郵件閘道器
- 語音閘道器

## 3. 設備比較表

| 設備 | OSI 層級 | 依據 | 衝突域 | 廣播域 | 主要功能 |
|:---|:---:|:---|:---|:---|:---|
| **集線器** | Layer 1 | 無 | 共享 | 共享 | 訊號放大、廣播 |
| **交換器** | Layer 2 | MAC 位址 | 隔離 | 共享 | MAC 位址學習、選擇性轉發 |
| **路由器** | Layer 3 | IP 位址 | 隔離 | 隔離 | 路由選擇、網路連接 |
| **橋接器** | Layer 2 | MAC 位址 | 隔離 | 共享 | 框架過濾 |
| **閘道器** | Layer 7 | 應用協定 | 隔離 | 隔離 | 協定轉換 |

## 4. 選擇適當的設備

### 4.1 小型區域網路

**場景**: 家庭或小型辦公室

**建議**: 
- 使用交換器連接多台電腦
- 使用路由器連接網際網路

### 4.2 大型區域網路

**場景**: 企業內部網路

**建議**:
- 核心層: 使用高階路由器
- 匯聚層: 使用管理型交換器
- 存取層: 使用交換器連接終端設備

### 4.3 網路擴展

**場景**: 需要連接多個網路區段

**建議**:
- 使用路由器連接不同子網路
- 使用交換器擴展單一網路

### 4.4 效能優化

**場景**: 網路效能不佳

**建議**:
- 用交換器取代集線器
- 使用路由器進行流量控制

## 5. 實際範例

### 5.1 範例 1: 家庭網路

```
網際網路
    ↓
路由器 (分配 IP、NAT)
    ↓
交換器 (連接多台設備)
    ↓
電腦、手機、平板等
```

### 5.2 範例 2: 企業網路

```
網際網路
    ↓
邊界路由器
    ↓
核心路由器
    ↓
管理型交換器 (VLAN)
    ↓
交換器
    ↓
終端設備
```

## 6. 練習題

### 練習題 1

請比較集線器、交換器和路由器的差異。

**參考答案：**
- **集線器 (Layer 1)**: 工作在實體層，廣播所有資料，無智慧，效率低
- **交換器 (Layer 2)**: 工作在資料連結層，根據 MAC 位址選擇性轉發，隔離衝突域
- **路由器 (Layer 3)**: 工作在網路層，根據 IP 位址路由，隔離廣播域，連接不同網路

### 練習題 2

為什麼交換器比集線器更有效率？

**參考答案：**
交換器會學習每個埠連接的裝置 MAC 位址，只將資料轉發到目標裝置所在的埠，而不是像集線器那樣廣播到所有埠。這樣可以減少不必要的網路流量，提高效率，並提供更好的安全性。

### 練習題 3

在什麼情況下應該使用路由器而不是交換器？

**參考答案：**
當需要連接不同的網路（不同的 IP 子網路）、需要進行路由選擇、需要隔離廣播域、或需要連接網際網路時，應該使用路由器。如果只是在同一個網路內連接多台設備，使用交換器即可。

## 7. 考試重點提醒

1. **OSI 層級**: 記住各設備工作的 OSI 層級
2. **轉發依據**: 理解各設備根據什麼進行轉發（集線器無、交換器 MAC、路由器 IP）
3. **衝突域和廣播域**: 理解各設備如何影響衝突域和廣播域
4. **功能差異**: 清楚區分各設備的主要功能
5. **應用場景**: 了解不同場景下應該使用哪種設備
