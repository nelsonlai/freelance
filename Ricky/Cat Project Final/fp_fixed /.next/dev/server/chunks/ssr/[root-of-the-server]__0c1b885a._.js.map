{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/youjou/Downloads/fp_fixed%20%281%29/src/app/match-result/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./match-result.css\";\nimport Link from \"next/link\";\n\n// üß± ÂÆöÁæ©Ë≤ìË≥áÊñôÁöÑ‰ªãÈù¢ÔºàÂûãÂà•Ôºâ\ninterface CatProfile {\n  name: string;\n  breed: string;\n  age: number;\n  gender?: string;\n  health: string;\n  vaccinations: string[];\n  photo_path?: string;\n}\n\nexport default function MatchResultPage() {\n  const [myCat, setMyCat] = useState<CatProfile | null>(null);\n  const [matches, setMatches] = useState<{ cat: CatProfile; score: number }[]>([]);\n  const [matchIdx, setMatchIdx] = useState(0);\n  const [review, setReview] = useState<string>(\"\");\n  const [userEmail, setUserEmail] = useState<string>(\"\");\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"auth_token\") || \"\";\n    if (!token) {\n      window.location.href = \"/login\";\n      return;\n    }\n\n    const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:5050\";\n\n    (async () => {\n      try {\n        const res = await fetch(`${API_BASE}/api/match-result`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        const json = await res.json().catch(() => ({}));\n        if (!res.ok) {\n          alert(json?.message || \"Failed to load match result.\");\n          return;\n        }\n\n        setUserEmail(json?.user?.email || \"\");\n        setMyCat(json?.your_feline || null);\n        setReview(json?.match_review || \"\");\n        setMatches(Array.isArray(json?.potential_matches) ? json.potential_matches : []);\n        setMatchIdx(0);\n      } catch (err) {\n        console.error(err);\n        alert(\"Something went wrong loading match data.\");\n      }\n    })();\n  }, []);\n\n  // üîô ËøîÂõû‰∏ä‰∏ÄÈ†Å\n  const handleBack = () => window.history.back();\n\n  const API_BASE = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:5050\";\n  const currentMatch = matches.length ? matches[Math.min(matchIdx, matches.length - 1)] : null;\n  const matchCat = currentMatch?.cat || null;\n  const nextMatch = () => {\n    if (!matches.length) return;\n    setMatchIdx((i) => (i + 1) % matches.length);\n  };\n  const prevMatch = () => {\n    if (!matches.length) return;\n    setMatchIdx((i) => (i - 1 + matches.length) % matches.length);\n  };\n\n  return (\n    <div className=\"match-result-page\">\n      {/* üß≠ Header */}\n      <header className=\"header\">\n  {/* ‚úÖ ÈÄôË£°ÊîπÊàê‰ΩøÁî® Link */}\n  <Link href=\"/\" className=\"back-btn\">\n    ‚ÜêBack to Home\n  </Link>\n\n  <div className=\"logo\">\n    üêæ‚ÄØ<span>PawMatch</span>\n  </div>\n\n  <div className=\"head-titles\">\n    <h1>Feline Compatibility Analysis</h1>\n    <p>Find the purrfect partner for your beloved cat üíû</p>\n  </div>\n</header>\n      <main>\n        {/* ‰∏äÂÖ©Âç°ÔºöYour Feline / Potential Match */}\n        <div className=\"top-row\">\n\n          {/* Â∑¶ÈÇäÔºöÁî®Êà∂Ë≤ìË≥áÊñô */}\n          <section className=\"card\">\n            <h2>Your‚ÄØFeline</h2>\n\n            {myCat ? (\n              <div className=\"cat-info\">\n                <div className=\"cat-photo\">\n                  <img\n                    src={(myCat.photo_path ? `${API_BASE}${myCat.photo_path}` : \"/images/your_cat.jpg\")}\n                    alt={myCat.name}\n                  />\n                </div>\n                <ul>\n                  <li><b>Owner:</b> {userEmail || \"-\"}</li>\n                  <li><b>Name:</b> {myCat.name}</li>\n                  <li><b>Breed:</b> {myCat.breed}</li>\n                  <li><b>Age:</b> {myCat.age}</li>\n                  <li><b>Gender:</b> {myCat.gender || \"-\"}</li>\n                  <li><b>Health:</b> {myCat.health}</li>\n                  <li><b>Vaccinations:</b> {(myCat.vaccinations || []).join(\", \")}</li>\n                </ul>\n              </div>\n            ) : (\n              <p className=\"desc\">Loading your cat profile...</p>\n            )}\n\n            <p className=\"desc\">\n              Your cat‚Äôs data helps PawMatch find their best match.\n            </p>\n          </section>\n\n          {/* Âè≥ÈÇäÔºöPotential Match */}\n          <section className=\"card\">\n            <h2>Potential Match</h2>\n            <div className=\"match-info\">\n              <div className=\"match-photo\">\n                <button className=\"arrow left\" onClick={prevMatch} type=\"button\">‚Üê</button>\n                <img\n                  src={(matchCat?.photo_path ? `${API_BASE}${matchCat.photo_path}` : \"/images/match_cat.jpg\")}\n                  alt=\"Potential Match\"\n                />\n                <button className=\"arrow right\" onClick={nextMatch} type=\"button\">‚Üí</button>\n              </div>\n              <ul>\n                {matchCat ? (\n                  <>\n                    <li><b>Score:</b> {currentMatch?.score ?? 0}</li>\n                    <li><b>Name:</b> {matchCat.name}</li>\n                    <li><b>Breed:</b> {matchCat.breed}</li>\n                    <li><b>Age:</b> {matchCat.age} years</li>\n                    <li><b>Gender:</b> {matchCat.gender || \"-\"}</li>\n                    <li><b>Health:</b> {matchCat.health}</li>\n                    <li><b>Vaccinations:</b> {(matchCat.vaccinations || []).join(\", \")}</li>\n                  </>\n                ) : (\n                  <li>No other cats in database yet.</li>\n                )}\n              </ul>\n            </div>\n            <p className=\"desc\">\n              Browse more compatible cats analyzed by PawMatch AI using the arrows.\n            </p>\n          </section>\n        </div>\n\n        {/* ‰∏ãÊñπÔºöMatch Review */}\n        <section className=\"match-review\">\n          <h2>Match Review</h2>\n          <p className=\"caption\">\n            AI-generated preview ‚Äì possible kitten appearance üß°\n          </p>\n\n          <div className=\"kitten-photo\">\n            <img src=\"/images/kitten.jpg\" alt=\"Kitten Result\" />\n          </div>\n\n          <div className=\"ai-review\">\n            {review || \"AI review is not available yet. Configure POE_API_KEY in Flask .env to enable.\"}\n          </div>\n        </section>\n\n        {/* Share Button */}\n        <div className=\"actions\">\n          <button className=\"share\">üì§ Share Result</button>\n        </div>\n      </main>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}